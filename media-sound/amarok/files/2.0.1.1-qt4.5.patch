diff -ru amarok-2.0.1.1.org/src/scriptengine/generator/generator/shellimplgenerator.cpp amarok-2.0.1.1.patched/src/scriptengine/generator/generator/shellimplgenerator.cpp
--- amarok-2.0.1.1.org/src/scriptengine/generator/generator/shellimplgenerator.cpp	2009-01-06 13:50:14.000000000 +0100
+++ amarok-2.0.1.1.patched/src/scriptengine/generator/generator/shellimplgenerator.cpp	2009-02-20 11:26:14.000000000 +0100
@@ -105,6 +105,7 @@
         declareFunctionMetaTypes(s, functions, registeredTypeNames);
         s << endl;
     }
+    writeInjectedCode(s, meta_class);
 
     // write constructors
     foreach (const AbstractMetaFunction *ctor, ctors) {
diff -ru amarok-2.0.1.1.org/src/scriptengine/generator/generator/typesystem_gui.xml amarok-2.0.1.1.patched/src/scriptengine/generator/generator/typesystem_gui.xml
--- amarok-2.0.1.1.org/src/scriptengine/generator/generator/typesystem_gui.xml	2009-01-06 13:50:14.000000000 +0100
+++ amarok-2.0.1.1.patched/src/scriptengine/generator/generator/typesystem_gui.xml	2009-02-20 11:26:08.000000000 +0100
@@ -5389,8 +5389,13 @@
   <object-type name="QInputContextPlugin"/>
   <object-type name="QPictureFormatPlugin"/>
   <object-type name="QStylePlugin"/>
-  <object-type name="QTextCodecPlugin"/>
-     
+  
+  <object-type name="QTextCodecPlugin">
+    <inject-code class="shell" position="beginning">
+Q_DECLARE_METATYPE(QList&lt;int>)
+    </inject-code>
+  </object-type>
+       
   <suppress-warning text="WARNING(MetaJavaBuilder) :: skipping function 'QPixmap::QPixmap', unmatched parameter type 'QPixmapData*'"/>
   <suppress-warning text="WARNING(MetaJavaBuilder) :: skipping * unmatched *type '*Private&amp;'"/>
   <suppress-warning text="WARNING(MetaJavaBuilder) :: skipping * unmatched *type '*Private\*'"/>
